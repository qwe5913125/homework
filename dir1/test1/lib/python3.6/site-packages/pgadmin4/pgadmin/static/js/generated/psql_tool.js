define(["pgadmin.browser.constants","pgadmin.browser.endpoints","pgadmin.browser.messages","pgadmin.browser.utils","pgadmin.user_management.current_user","translations"],((e,t,n,r,a,o)=>(()=>{"use strict";var i,s={64532:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.pgBrowser=void 0,n(32564),n(89554);var r=l(n(19755)),a=l(n(81311)),o=l(n(55112)),i=l(n(1950)),s=n(44092);function l(e){return e&&e.__esModule?e:{default:e}}var u=o.default.Browser=o.default.Browser||{};t.pgBrowser=u;a.default.extend(u,{inactivity_timeout_at:null,logging_activity:!1,inactivity_timeout_daemon_running:!1,is_pgadmin_timedout:function(){return!i.default.pgAdmin},is_inactivity_timeout:function(){return i.default.pgAdmin.Browser.inactivity_timeout_at<this.get_epoch_now()},get_epoch_now:function(){return(0,s.getEpoch)()},log_activity:function(){var e=this;this.logging_activity||(this.logging_activity=!0,this.inactivity_timeout_at=this.get_epoch_now()+o.default.user_inactivity_timeout,setTimeout((function(){e.logging_activity=!1}),1e3))},register_to_activity_listener:function(e,t){var n=["mousemove","mousedown","keydown"],r=this;n.forEach((function(a){e.addEventListener(a,(function a(){r.is_pgadmin_timedout()?(n.forEach((function(t){e.removeEventListener(t,a,!0)})),t()):i.default.pgAdmin.Browser.log_activity()}),!0)}))},override_activity_event_decorator:function(e){return function(){return o.default.override_user_inactivity_timeout&&i.default.pgAdmin.Browser.log_activity(),e.apply(this,arguments)}},logout_inactivity_user:function(){a.default.isUndefined(u.utils)||a.default.isUndefined(u.utils.logout_url)||(window.location.href=u.utils.logout_url)},start_inactivity_timeout_daemon:function(){var e=this;if(o.default.user_inactivity_timeout>0&&!e.inactivity_timeout_daemon_running)var t=setInterval((function(){e.inactivity_timeout_daemon_running=!0,e.is_inactivity_timeout()&&(clearInterval(t),e.inactivity_timeout_daemon_running=!1,(0,r.default)(window).off("beforeunload"),e.logout_inactivity_user())}),1e3)}})},37294:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(66992),n(41539),n(78783),n(4129),n(33948),n(69070),n(38880),n(82526),n(41817),n(32165),n(24812),n(32564),n(69826);var a=h(n(81311)),o=h(n(55112)),i=h(n(19755)),s=h(n(42441)),l=p(n(44092)),u=h(n(89087)),d=p(n(72945)),c=h(n(1950));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}function h(e){return e&&e.__esModule?e:{default:e}}var _=o.default.Browser=o.default.Browser||{};_.keyboardNavigation=_.keyboardNavigation||{},a.default.extend(_.keyboardNavigation,{init:function(){s.default.reset(),_.preferences_cache.length>0&&(this.keyboardShortcut={file_shortcut:l.parseShortcutValue(_.get_preference("browser","main_menu_file").value),object_shortcut:l.parseShortcutValue(_.get_preference("browser","main_menu_object").value),tools_shortcut:l.parseShortcutValue(_.get_preference("browser","main_menu_tools").value),help_shortcut:l.parseShortcutValue(_.get_preference("browser","main_menu_help").value),left_tree_shortcut:l.parseShortcutValue(_.get_preference("browser","browser_tree").value),tabbed_panel_backward:l.parseShortcutValue(_.get_preference("browser","tabbed_panel_backward").value),tabbed_panel_forward:l.parseShortcutValue(_.get_preference("browser","tabbed_panel_forward").value),sub_menu_query_tool:l.parseShortcutValue(_.get_preference("browser","sub_menu_query_tool").value),sub_menu_view_data:l.parseShortcutValue(_.get_preference("browser","sub_menu_view_data").value),sub_menu_search_objects:l.parseShortcutValue(_.get_preference("browser","sub_menu_search_objects").value),sub_menu_properties:l.parseShortcutValue(_.get_preference("browser","sub_menu_properties").value),sub_menu_create:l.parseShortcutValue(_.get_preference("browser","sub_menu_create").value),sub_menu_delete:l.parseShortcutValue(_.get_preference("browser","sub_menu_delete").value),sub_menu_refresh:l.parseShortcutValue(_.get_preference("browser","sub_menu_refresh").value),context_menu:l.parseShortcutValue(_.get_preference("browser","context_menu").value),direct_debugging:l.parseShortcutValue(_.get_preference("browser","direct_debugging").value),drop_multiple_objects:l.parseShortcutValue(_.get_preference("browser","grid_menu_drop_multiple").value),drop_cascade_multiple_objects:l.parseShortcutValue(_.get_preference("browser","grid_menu_drop_cascade_multiple").value),add_grid_row:l.parseShortcutValue(_.get_preference("browser","add_grid_row").value),open_quick_search:l.parseShortcutValue(_.get_preference("browser","open_quick_search").value)},this.shortcutMethods={bindMainMenu:{shortcuts:[this.keyboardShortcut.file_shortcut,this.keyboardShortcut.object_shortcut,this.keyboardShortcut.tools_shortcut,this.keyboardShortcut.help_shortcut]},bindRightPanel:{shortcuts:[this.keyboardShortcut.tabbed_panel_backward,this.keyboardShortcut.tabbed_panel_forward]},bindLeftTree:{shortcuts:this.keyboardShortcut.left_tree_shortcut},bindSubMenuQueryTool:{shortcuts:this.keyboardShortcut.sub_menu_query_tool},bindSubMenuViewData:{shortcuts:this.keyboardShortcut.sub_menu_view_data},bindSubMenuSearchObjects:{shortcuts:this.keyboardShortcut.sub_menu_search_objects},bindSubMenuProperties:{shortcuts:this.keyboardShortcut.sub_menu_properties},bindSubMenuCreate:{shortcuts:this.keyboardShortcut.sub_menu_create},bindSubMenuDelete:{shortcuts:this.keyboardShortcut.sub_menu_delete},bindSubMenuRefresh:{shortcuts:this.keyboardShortcut.sub_menu_refresh,bindElem:"#tree"},bindContextMenu:{shortcuts:this.keyboardShortcut.context_menu},bindDirectDebugging:{shortcuts:this.keyboardShortcut.direct_debugging},bindDropMultipleObjects:{shortcuts:this.keyboardShortcut.drop_multiple_objects},bindDropCascadeMultipleObjects:{shortcuts:this.keyboardShortcut.drop_cascade_multiple_objects},bindAddGridRow:{shortcuts:this.keyboardShortcut.add_grid_row},bindOpenQuickSearch:{shortcuts:this.keyboardShortcut.open_quick_search}},this.bindShortcuts())},bindShortcuts:function(){var e=this;a.default.each(e.shortcutMethods,(function(t,n){e._bindWithMousetrap(t.shortcuts,e[n],t.bindElem)}));(0,i.default)(".pg-navbar").on("keydown",(function(t){switch(t.keyCode){case 37:e.bindMainMenuLeft(t);break;case 38:e.bindMainMenuUpDown(t,"up");break;case 39:e.bindMainMenuRight(t);break;case 40:e.bindMainMenuUpDown(t,"down")}}))},_bindWithMousetrap:function(e,t,n){var r=this;if(s.default.unbind(e),n){var a=document.querySelector(n);(0,s.default)(a).bind(e,function(){t.apply(this,arguments)}.bind(a))}else s.default.bind(e,(function(){t.apply(r,arguments)}))},unbindShortcuts:function(){a.default.each(this.mousetrapInstances,(function(e){e.instance.reset()})),this.mousetrapInstances=[]},bindMainMenu:function(e,t){var n=this.keyboardShortcut;t===n.file_shortcut&&(0,i.default)("#mnu_file a.dropdown-toggle").dropdown("toggle"),t===n.object_shortcut&&(0,i.default)("#mnu_obj a.dropdown-toggle").first().dropdown("toggle"),t===n.tools_shortcut&&(0,i.default)("#mnu_tools a.dropdown-toggle").dropdown("toggle"),t===n.help_shortcut&&(0,i.default)("#mnu_help a.dropdown-toggle").dropdown("toggle")},bindRightPanel:function(e,t){var n=0,r=o.default.Browser.docker.findPanels().length-1,i=0,s=!1,l=this.keyboardShortcut;a.default.each(o.default.Browser.docker.findPanels(),(function(e,t){e.isVisible()&&!s&&"browser"!==e._type&&(i=t,s=!0)})),t===l.tabbed_panel_backward?n=i>0?i-1:1:t===l.tabbed_panel_forward&&(n=i<r?i+1:r),o.default.Browser.docker.findPanels()[n].focus(),setTimeout((function(){document.activeElement instanceof HTMLIFrameElement&&document.activeElement.blur()}),1e3)},bindMainMenuLeft:function(e){if((0,i.default)(e.target).hasClass("nav-link")){var t=(0,i.default)(e.target).closest(".nav-item");for(d._stopEventPropagation(e),t=t.prev(".nav-item");t.hasClass("d-none");)t=t.prev(".nav-item");t.find(".dropdown-toggle").first().dropdown("toggle")}else if((0,i.default)(e.target).closest(".dropdown-menu").length>0){var n=(0,i.default)(e.target).closest("li");d._stopEventPropagation(e);var r=n.closest(".dropdown-menu");r.closest(".dropdown-submenu").length>0&&(r.removeClass("show"),r.closest(".dropdown-submenu").removeClass("dropdown-submenu-visible"),(n=r.closest(".dropdown-submenu")).find(".dropdown-item").trigger("focus"))}},bindMainMenuRight:function(e){if((0,i.default)(e.target).hasClass("nav-link")){var t=(0,i.default)(e.target).closest(".nav-item");for(d._stopEventPropagation(e),t=t.next(".nav-item");t.hasClass("d-none");)t=t.next(".nav-item");t.find(".dropdown-toggle").first().dropdown("toggle")}else if((0,i.default)(e.target).closest(".dropdown-menu").length>0){var n=(0,i.default)(e.target).closest("li");d._stopEventPropagation(e),n.hasClass("dropdown-submenu")&&(n.addClass("dropdown-submenu-visible"),n.find(".dropdown-menu").addClass("show"),n.find(".dropdown-menu .dropdown-item").first().trigger("focus"))}},bindMainMenuUpDown:function(e,t){if((0,i.default)(e.target).closest(".dropdown-menu").length>0){d._stopEventPropagation(e);var n=(0,i.default)(e.target).closest("li"),r=(0,i.default)(e.target).closest(".dropdown-menu");for(r.find(".show").removeClass("show"),r.find(".dropdown-submenu").removeClass("dropdown-submenu-visible"),"up"===t?n=n.prev():"down"===t&&(n=n.next());n.hasClass("dropdown-divider")||n.find(".dropdown-item").first().hasClass("disabled");)"up"===t?n=n.prev():"down"===t&&(n=n.next());n.find(".dropdown-item").trigger("focus")}},bindLeftTree:function(){var e=this.getTreeDetails();(0,i.default)("#tree").trigger("focus"),e.t.focus(e.i),e.t.select(e.i)},bindSubMenuQueryTool:function(){var e=this.getTreeDetails();e.d&&o.default.DataGrid.show_query_tool("",e.i)},bindSubMenuViewData:function(){var e=this.getTreeDetails();e.d&&o.default.DataGrid.show_data_grid({mnuid:1},e.i)},bindSubMenuSearchObjects:function(){var e=this.getTreeDetails();e.d&&o.default.SearchObjects.show_search_objects("",e.i)},bindSubMenuProperties:function(){var e=this.getTreeDetails();e.d&&!0!==o.default.Browser.Nodes[e.t.itemData(e.i)._type].collection_node&&o.default.Browser.Node.callbacks.show_obj_properties.call(o.default.Browser.Nodes[e.t.itemData(e.i)._type],{action:"edit"})},bindSubMenuCreate:function(){var e=this.getTreeDetails(),t=o.default.Browser.Nodes[e.t.itemData(e.i)._type];if(e.d){if(!0===t.collection_node){if(!t.node)return;t=o.default.Browser.Nodes[t.node]}o.default.Browser.Node.callbacks.show_obj_properties.call(t,{action:"create",item:e.i})}},bindSubMenuDelete:function(){var e=this.getTreeDetails();e.d&&!0!==o.default.Browser.Nodes[e.t.itemData(e.i)._type].collection_node&&o.default.Browser.Node.callbacks.delete_obj.call(o.default.Browser.Nodes[e.t.itemData(e.i)._type])},bindSubMenuRefresh:function(e){e.preventDefault();var t=_.keyboardNavigation.getTreeDetails();o.default.Browser.Node.callbacks.refresh.call(o.default.Browser.Nodes[t.t.itemData(t.i)._type])},bindContextMenu:function(e){var t=this.getTreeDetails(),n=e.srcElement||e.target,r=(0,i.default)(n).find(".aciTreeEntry").position().left+70,a=(0,i.default)(n).find(".aciTreeEntry").position().top+70;t.t.blur(t.i),(0,i.default)("#tree").trigger("blur"),t.i.children().contextMenu({x:r,y:a})},bindDirectDebugging:function(){var e=this.getTreeDetails(),t=e.t.itemData(e.i)._type;!e.d||"function"!==t&&"procedure"!==t||o.default.Tools.Debugger.can_debug(e.d,e.i,{debug_type:"direct"})&&o.default.Tools.Debugger.get_function_information(o.default.Browser.Nodes[t])},bindDropMultipleObjects:function(){!0===this.isPropertyPanelVisible()&&(0,i.default)("button.delete_multiple").length>0&&(0,i.default)("button.delete_multiple").click()},bindDropCascadeMultipleObjects:function(){!0===this.isPropertyPanelVisible()&&(0,i.default)("button.delete_multiple_cascade").length>0&&(0,i.default)("button.delete_multiple_cascade").click()},bindAddGridRow:function(){var e=(0,i.default)(document.activeElement).closest(".object.subnode");(0,i.default)(e).length&&(0,i.default)(e).find(".add").click()},isPropertyPanelVisible:function(){var e=!1;return a.default.each(o.default.Browser.docker.findPanels(),(function(t){"properties"===t._type&&(e=t.isVisible())})),e},getTreeDetails:function(){var e=o.default.Browser.tree,t=e.selected().length>0?e.selected():e.first(),n=t&&1===t.length?e.itemData(t):void 0;return{t:e,i:t,d:n}},getDialogTabNavigator:function(e){var t=c.default.pgAdmin.Browser.get_preference("browser","dialog_tab_backward").value,n=c.default.pgAdmin.Browser.get_preference("browser","dialog_tab_forward").value;return new u.default.dialogTabNavigator(e,t,n)},bindOpenQuickSearch:function(){(0,i.default)("#search_icon").trigger("click")}}),e.exports=o.default.Browser.keyboardNavigation},59434:(e,t,n)=>{var r=n(64492);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(66992),n(41539),n(78783),n(4129),n(33948),n(69070),n(38880),n(82526),n(41817),n(32165),Object.defineProperty(t,"__esModule",{value:!0}),t.pgBrowser=void 0,n(32564),n(68309);var o=f(n(55112)),i=f(n(28008)),s=f(n(19755)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(r,i,s):r[i]=e[i]}r.default=e,n&&n.set(e,r);return r}(n(55455)),u=f(n(91669));n(35816);var d=f(n(1950));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function f(e){return e&&e.__esModule?e:{default:e}}var p=o.default.Browser=o.default.Browser||{};t.pgBrowser=p;var h=window.wcDocker;r.extend(p,{lock_layout_levels:{PREVENT_DOCKING:"docking",FULL:"full",NONE:"none"},buildDefaultLayout:function(e){var t=e.addPanel("browser",h.DOCK.LEFT),n=e.addPanel("dashboard",h.DOCK.RIGHT,t);e.addPanel("properties",h.DOCK.STACKED,n,{tabOrientation:h.TAB.TOP}),e.addPanel("sql",h.DOCK.STACKED,n),e.addPanel("statistics",h.DOCK.STACKED,n),e.addPanel("dependencies",h.DOCK.STACKED,n),e.addPanel("dependents",h.DOCK.STACKED,n)},save_current_layout:function(e,t){if(t){var n={setting:e,value:t.save()};s.default.ajax({type:"POST",url:(0,i.default)("settings.store_bulk"),data:n})}},restore_layout:function(e,t,n){if(""!=t)try{e.restore(t)}catch(t){e.clear(),n&&n(e)}else n&&n(e);var r=d.default.pgAdmin.Browser,a=setInterval((function(){r.get_preferences_for_module("browser")&&(clearInterval(a),r.reflectLocklayoutChange(e),r.onPreferencesChange("browser",(function(){r.reflectLocklayoutChange(e)})))}),500)},reflectLocklayoutChange:function(e){var t=d.default.pgAdmin.Browser,n=t.get_preferences_for_module("browser");t.lock_layout(e,n.lock_layout)},lock_layout:function(e,t){var n=this.menus.file.mnu_locklayout.menu_items;switch(t){case this.lock_layout_levels.PREVENT_DOCKING:e.lockLayout(h.LOCK_LAYOUT_LEVEL.PREVENT_DOCKING);break;case this.lock_layout_levels.FULL:e.lockLayout(h.LOCK_LAYOUT_LEVEL.FULL);break;case this.lock_layout_levels.NONE:e.lockLayout(h.LOCK_LAYOUT_LEVEL.NONE)}r.each(n,(function(e){e.name!="mnu_lock_"+t?e.change_checked(!1):e.change_checked(!0)}))},save_lock_layout:function(e){var t=d.default.pgAdmin.Browser;s.default.ajax({url:(0,i.default)("browser.lock_layout"),method:"PUT",contentType:"application/json",data:JSON.stringify({value:e})}).done((function(){t.cache_preferences("browser")})).fail((function(e,t){l.pgNotifier(t,e,(0,u.default)("Failed to save the lock layout setting."))}))},mnu_lock_docking:function(){this.lock_layout(this.docker,this.lock_layout_levels.PREVENT_DOCKING),this.save_lock_layout(this.lock_layout_levels.PREVENT_DOCKING)},mnu_lock_full:function(){this.lock_layout(this.docker,this.lock_layout_levels.FULL),this.save_lock_layout(this.lock_layout_levels.FULL)},mnu_lock_none:function(){this.lock_layout(this.docker,this.lock_layout_levels.NONE),this.save_lock_layout(this.lock_layout_levels.NONE)}})},33240:(e,t,n)=>{var r=n(64492);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(66992),n(41539),n(78783),n(4129),n(33948),n(69070),n(38880),n(82526),n(41817),n(32165),Object.defineProperty(t,"__esModule",{value:!0}),t.pgBrowser=void 0,n(83710),n(68309),n(47941),n(32564);var o=p(n(55112)),i=p(n(28008)),s=p(n(19755)),l=f(n(55455)),u=f(n(81240)),d=p(n(1950));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(r,i,s):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}function p(e){return e&&e.__esModule?e:{default:e}}var h=n(23602),_=o.default.Browser=o.default.Browser||{};t.pgBrowser=_,r.extend(_,{preferences_cache:[],prefcache_version:0,generate_preference_version:function(){return(new Date).getTime()},preference_version:function(e){if(!e)return this.prefcache_version;this.prefcache_version=e},get_preference:function(e,t){return r.findWhere(this.preferences_cache,{module:e,name:t})},get_preferences_for_module:function(e){var t={};if(r.each(r.where(this.preferences_cache,{module:e}),(function(e){t[e.name]=e.value})),Object.keys(t).length>0)return t},get_preference_for_id:function(e){return r.findWhere(this.preferences_cache,{id:e})},cache_preferences:function(e){var t=this,n={};n[o.default.csrf_token_header]=o.default.csrf_token,setTimeout((function(){s.default.ajax({url:(0,i.default)("preferences.get_all"),headers:n}).done((function(n){t.preferences_cache=n,t.preference_version(t.generate_preference_version()),_.keyboardNavigation.init(),_.tree&&(h.modifyAcitreeAnimation(t),h.modifyAlertifyAnimation(t)),_.browserTreeState.init(),e&&("string"==typeof e?s.default.event.trigger("prefchange:"+e):r.each(e,(function(e,t){s.default.event.trigger("prefchange:"+t)})))})).fail((function(e,t,n){l.pgRespErrorNotify(e,n)}))}),500)},reflectPreferences:function(e){var t=this;if("sqleditor"===e||null==e){var n=t.get_preferences_for_module("sqleditor");(0,s.default)(t.editor.getWrapperElement()).css("font-size",u.calcFontSize(n.sql_font_size)),t.editor.setOption("tabSize",n.tab_size),t.editor.setOption("lineWrapping",n.wrap_code),t.editor.setOption("autoCloseBrackets",n.insert_pair_brackets),t.editor.setOption("matchBrackets",n.brace_matching),t.editor.refresh()}},onPreferencesChange:function(e,t){(0,s.default)(d.default).on("prefchange:"+e,(function(e){t(e)}))}})},7134:(e,t,n)=>{var r=n(64492);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(66992),n(41539),n(78783),n(4129),n(33948),n(69070),n(38880),n(82526),n(41817),n(32165),Object.defineProperty(t,"__esModule",{value:!0}),t.pgBrowser=void 0;var o=c(n(55112)),i=c(n(28008)),s=c(n(19755)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(r,i,s):r[i]=e[i]}r.default=e,n&&n.set(e,r);return r}(n(55455)),u=c(n(91669));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function c(e){return e&&e.__esModule?e:{default:e}}var f=o.default.Browser=o.default.Browser||{};t.pgBrowser=f,r.extend(f,{send_signal_to_runtime:function(e){s.default.ajax({url:(0,i.default)("browser.signal_runtime"),method:"POST",contentType:"application/json",data:JSON.stringify({command:e})}).fail((function(e,t){l.pgNotifier(t,e,(0,u.default)("Failed to send signal to runtime."))}))},mnu_configure_runtime:function(){this.send_signal_to_runtime("Runtime Open Configuration")},mnu_viewlog_runtime:function(){this.send_signal_to_runtime("Runtime Open View Log")},mnu_toggle_fullscreen_runtime:function(){this.send_signal_to_runtime("Runtime Toggle Full Screen")},mnu_actual_size_runtime:function(){this.send_signal_to_runtime("Runtime Actual Size")},mnu_zoomin_runtime:function(){this.send_signal_to_runtime("Runtime Zoom In")},mnu_zoomout_runtime:function(){this.send_signal_to_runtime("Runtime Zoom Out")}})},14953:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.initializeToolbar=function(e,t){l=e,a.default.each(u,(function(e){c(e)})),a.default.each(d,(function(e){c(e)})),e.on(t.EVENT.BUTTON,(function(e){if("name"in e&&e.name===(0,r.default)("Query Tool"))o.default.DataGrid.show_query_tool("",o.default.Browser.tree.selected());else if("name"in e&&e.name===(0,r.default)("View Data"))o.default.DataGrid.show_data_grid({mnuid:3},o.default.Browser.tree.selected());else if("name"in e&&e.name===(0,r.default)("Filtered Rows"))o.default.DataGrid.show_filtered_row({mnuid:4},o.default.Browser.tree.selected());else if("name"in e&&e.name===(0,r.default)("Search objects"))o.default.SearchObjects.show_search_objects("",o.default.Browser.tree.selected());else if("name"in e&&e.name===(0,r.default)("PSQL Tool")){var t=o.default.Browser.tree,n={}.item||t.selected(),a=n&&1==n.length?t.itemData(n):void 0;o.default.Browser.psql.psql_tool(a,n,!0)}}))},t.enable=function(e,t){e in s?l.buttonEnable(e,t):console.warn("Developer warning: No tool button found with label: "+e)},n(34553),n(68309);var r=i(n(91669)),a=i(n(81311)),o=i(n(55112));function i(e){return e&&e.__esModule?e:{default:e}}var s={},l=null,u=[{label:(0,r.default)("Search objects"),ariaLabel:(0,r.default)("Search objects"),btnClass:"fa fa-search",text:"",toggled:!1,toggleClass:"",parentClass:"pg-toolbar-btn btn-primary-icon",enabled:!1},{label:(0,r.default)("Filtered Rows"),ariaLabel:(0,r.default)("Filtered Rows"),btnClass:"pg-font-icon icon-row_filter",text:"",toggled:!1,toggleClass:"",parentClass:"pg-toolbar-btn btn-primary-icon",enabled:!1},{label:(0,r.default)("View Data"),ariaLabel:(0,r.default)("View Data"),btnClass:"pg-font-icon sql-icon-lg icon-view_data",text:"",toggled:!1,toggleClass:"",parentClass:"pg-toolbar-btn btn-primary-icon",enabled:!1},{label:(0,r.default)("Query Tool"),ariaLabel:(0,r.default)("Query Tool"),btnClass:"pg-font-icon icon-query_tool",text:"",toggled:!1,toggleClass:"",parentClass:"pg-toolbar-btn btn-primary-icon",enabled:!1}];o.default.enable_psql&&u.unshift({label:(0,r.default)("PSQL Tool"),ariaLabel:(0,r.default)("PSQL Tool"),btnClass:"fas fa-terminal",text:"",toggled:!1,toggleClass:"",parentClass:"pg-toolbar-btn btn-primary-icon pg-toolbar-psql",enabled:!1});var d=[];function c(e){(!(e.label in s)||a.default.findIndex(l._buttonList,{name:e.label})<0)&&(l.addButton(e.label,e.btnClass,e.text,e.label,e.toggled,e.toggleClass,e.parentClass,e.enabled,e.ariaLabel),s[e.label]=e)}},7361:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.fetch_ticket=s,t.validate_kerberos_ticket=function(){if(a.default.current_auth_source!=o.default.KERBEROS)return;return setInterval((function(){l().then((function(){}),s)}),1e4)},t.fetch_ticket_lifetime=l,n(41539),n(88674),n(32564);var r=i(n(28008)),a=i(n(6537)),o=i(n(92026));function i(e){return e&&e.__esModule?e:{default:e}}function s(){return fetch((0,r.default)("kerberos.update_ticket")).then((function(e){return e.status>=200&&e.status<300?Promise.resolve(e):Promise.reject(new Error(e.statusText))}))}function l(){return fetch((0,r.default)("kerberos.validate_ticket")).then((function(e){return e.status>=200&&e.status<300?e.json():Promise.reject(new Error(e.statusText))})).then((function(e){var t=e.data.ticket_lifetime;return t>0?Promise.resolve(t):Promise.reject()}))}},68363:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.getHelpUrl=function(e,t,n,r){var a=Math.floor(n/1e4),o=Math.floor(n/100)-100*a,i=n-(1e4*a+100*o),s="",l=a+"."+o;"ppas"==r&&a<10?l=a+"."+o+"."+i:"pg"==r&&a>=10&&(l=a);"/"!=(s=e.replace("$VERSION$",l)).substr(-1)&&(s+="/");return s+t},n(74916),n(15306)},20811:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(69826);var r,a=(r=n(4631))&&r.__esModule?r:{default:r};n(54086),n(64020),n(20017),n(88657),n(89700),n(71707),n(3585),n(69109),n(55292),n(81699),n(32095),n(14568),n(4328),n(82801),n(14504),n(90338),n(18473),a.default.commands.focusOut=function(){event.stopPropagation(),document.activeElement.blur(),event.currentTarget.hasOwnProperty("parents")&&event.currentTarget.parents().find(".sql-code-control")&&event.currentTarget.parents().find(".sql-code-control").focus()},a.default.defineInitHook((function(e){e.addKeyMap({Tab:function(e){e.somethingSelected()?e.execCommand("indentMore"):e.getOption("indentWithTabs")?e.replaceSelection("\t","end","+input"):e.execCommand("insertSoftTab")}})})),a.default.keyMap.default.Esc="focusOut";var o=a.default;t.default=o},61329:(e,t,n)=>{n(92222);var r,a=(r=n(81311))&&r.__esModule?r:{default:r};e.exports={generate_url:function(e,t,n,r,o,i){var s="";return a.default.each(a.default.sortBy(a.default.pick(t,o),(function(e){return e.priority})),(function(e){s="".concat(s,"/").concat(encodeURI(e._id))})),s=i?"".concat(s,"/").concat(i):"".concat(s,"/"),"".concat(e).concat(r,"/").concat(n).concat(s)}}},86620:(e,t,n)=>{var r,a;n(23157),n(74916),n(15306),n(82772),r=[n(19755),n(81311)],void 0===(a=function(e,t){return function(e,n){if(t.isUndefined(n)||t.isNull(n))return!0;n.startsWith("coll-")&&(n=n.replace("coll-",""));if(t.indexOf(["server_group","server","catalog_object_column"],n)>=0)return!0;var r=e.get_preference("browser","show_node_"+n);return!r||r.value}}.apply(t,r))||(e.exports=a)},90338:(e,t,n)=>{var r,a,o,i;function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e=n.nmd(e),n(94986),n(82772),n(82526),n(41817),n(41539),n(32165),n(66992),n(78783),n(33948),i=function(e){e.registerHelper("fold","sql",(function(t,n){return function(t,n,r){for(var a,o,i=n.line,s=t.getLine(i),l=s.length,u=0,d=r[u].start,c=r[u].end;l>0;){var f=s.toUpperCase().lastIndexOf(d,l),p=d,h=c;if(f<n.ch){if(++u>=r.length)return;d=r[u].start,c=r[u].end,l=s.length}else{if(o=t.getTokenAt(e.Pos(i,f+1)).type,!/^(comment|string)/.test(o)){a=f;break}l=f-1}}if(!(null==a||s.toUpperCase().lastIndexOf(p)>a)){var _,g,v=1,b=t.lineCount();e:for(var m=i+1;m<b;++m)for(var y=t.getLine(m).toUpperCase(),w=0,S=0;S<1;){var k=y.indexOf(p,w),T=y.indexOf(h,w);if(k<0&&(k=y.length),T<0&&(T=y.length),(w=Math.min(k,T))==y.length){S=1;break}if(t.getTokenAt(e.Pos(m,w+1)).type==o)if(w==k)++v;else if(!--v){_=m,g=w;break e}++w}if(null!=_&&_!=i+1)return{from:e.Pos(i,a+d.length),to:e.Pos(_,g)}}}(t,n,[{start:"BEGIN",end:"END;"},{start:"IF",end:"END IF"},{start:"LOOP",end:"END LOOP"},{start:"CASE",end:"END CASE"}])}))},"object"==s(t)&&"object"==s(e)?i(n(4631)):(a=[n(4631)],void 0===(o="function"==typeof(r=i)?r.apply(t,a):r)||(e.exports=o))},18473:(e,t,n)=>{var r;((r=n(4631))&&r.__esModule?r:{default:r}).default.defineExtension("centerOnLine",(function(e){var t=this.getScrollInfo().clientHeight,n=this.charCoords({line:e,ch:0},"local");this.scrollTo(null,(n.top+n.bottom-t)/2)}))},87789:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.setPGCSRFToken=function(e,t){if(!t)throw"csrf-token meta tag has not been set";var n=a.default.sync;a.default.sync=function(r,a,o){return o.beforeSend=function(n){n.setRequestHeader(e,t)},n(r,a,o)};var i=a.default.get;a.default.get=function(n,r,a){return a.beforeSend=function(n){n.setRequestHeader(e,t)},i(n,r,a)},r.default.ajaxSetup({beforeSend:function(n){n.setRequestHeader(e,t)}}),o.default.interceptors.request.use((function(n){return n.headers[e]=t,n}),(function(e){return Promise.reject(e)}))},n(41539),n(88674);var r=i(n(19755)),a=i(n(72316)),o=i(n(9669));function i(e){return e&&e.__esModule?e:{default:e}}},89087:(e,t,n)=>{n(69826),n(24812),n(32564),n(69070);var r=i(n(19755)),a=i(n(42441)),o=n(44092);function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dialogContainer=t,this.tabSwitching=!1,this.tabs=this.dialogContainer.find(".nav-tabs:visible"),this.tabs.length>0&&(this.tabs=this.tabs[0]),this.dialogTabBackward=(0,o.parseShortcutValue)(n),this.dialogTabForward=(0,o.parseShortcutValue)(r),(0,a.default)(this.dialogContainer[0]).bind(this.dialogTabBackward,this.onKeyboardEvent.bind(this)),(0,a.default)(this.dialogContainer[0]).bind(this.dialogTabForward,this.onKeyboardEvent.bind(this))}var t,n,i;return t=e,(n=[{key:"onKeyboardEvent",value:function(e,t){var n=this.dialogContainer.find(".tab-content:first > .tab-pane.active:first:visible"),r=this.isActivePaneHasChildTabs(n);this.tabSwitching||(this.tabSwitching=!0,r&&this.navigate(t,r.childTab,r.childTabPane,e)||this.navigate(t,this.tabs,n,e))}},{key:"isActivePaneHasChildTabs",value:function(e){var t=e.find(".nav-tabs:first:visible");return t.length>0?{childTab:t,childTabPane:e.find(".tab-content:first > .tab-pane.active:first:visible")}:null}},{key:"navigate",value:function(e,t,n,r){return e==this.dialogTabBackward?this.navigateBackward(t,n,r):e==this.dialogTabForward&&this.navigateForward(t,n,r)}},{key:"navigateBackward",value:function(e,t,n){var a,i,s=this,l=(0,r.default)(e).find("li").has("a.active").prev("li");return l.length>0?(l.find("a").tab("show"),(i=(a=t.prev()).find(".tab-content:first > .tab-pane.active:first:visible")).length>0?(0,o.findAndSetFocus)(i):(0,o.findAndSetFocus)(a),setTimeout((function(){s.tabSwitching=!1}),200),n.stopPropagation(),!0):(this.tabSwitching=!1,!1)}},{key:"navigateForward",value:function(e,t,n){var a,i,s=this,l=(0,r.default)(e).find("li").has("a.active").next("li");return l.length>0?(l.find("a").tab("show"),(i=(a=t.next()).find(".tab-content:first > .tab-pane.active:first:visible")).length>0?(0,o.findAndSetFocus)(i):(0,o.findAndSetFocus)(a),setTimeout((function(){s.tabSwitching=!1}),200),n.stopPropagation(),!0):(this.tabSwitching=!1,!1)}},{key:"detach",value:function(){(0,a.default)(this.dialogContainer[0]).unbind(this.dialogTabBackward),(0,a.default)(this.dialogContainer[0]).unbind(this.dialogTabForward)}}])&&s(t.prototype,n),i&&s(t,i),e}();e.exports={dialogTabNavigator:l}},91669:(e,t,n)=>{var r,a;n(69600),n(21249),n(74916),n(23123),r=[n(52536)],void 0===(a=function(e){return function(t){var n=e[t]?e[t]:t;if(1==arguments.length)return n;try{var r=arguments;return n.split("%s").map((function(e,t){return t>0?t<r.length?[r[t],e].join(""):["%s",e].join(""):e})).join("")}catch(e){return console.error(e),n}}}.apply(t,r))||(e.exports=a)},72945:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.processEventDebugger=function(e,t,n,a){var o,i,s="";this.validateShortcutKeys(n.edit_grid_values,t)?(this._stopEventPropagation(t),(o=e.find('div.wcPanelTabContent:not(".wcPanelTabContentHidden")')).length&&(i=(0,r.default)(o).find("td.editable:first")).length&&i.trigger("click")):this.validateShortcutKeys(n.move_next,t)?(this._stopEventPropagation(t),s=l(a,"right")):this.validateShortcutKeys(n.move_previous,t)?(this._stopEventPropagation(t),s=l(a,"left")):this.validateShortcutKeys(n.switch_panel,t)&&(this._stopEventPropagation(t),s=l(a,"switch"));return s},t.processEventQueryTool=function(e,t,n,a){if(e.isQueryRunning())return;var o=n.which||n.keyCode,i="",s=e.preferences.execute_query,u=e.preferences.explain_query,d=e.preferences.explain_analyze_query,c=e.preferences.download_results,f=e.preferences.move_next,p=e.preferences.move_previous,h=e.preferences.switch_panel,_=e.preferences.toggle_case,g=e.preferences.commit_transaction,v=e.preferences.rollback_transaction,b=e.preferences.save_data,m=e.preferences.show_query_tool;if(this.validateShortcutKeys(s,n))this._stopEventPropagation(n),t.executeQuery(e);else if(this.validateShortcutKeys(u,n))this._stopEventPropagation(n),t.explain(e);else if(this.validateShortcutKeys(d,n))this._stopEventPropagation(n),t.explainAnalyze(e);else if(this.validateShortcutKeys(c,n))e.is_save_results_to_file_disabled||(this._stopEventPropagation(n),t.download(e));else if(this.validateShortcutKeys(_,n))this._stopEventPropagation(n),t.toggleCaseOfSelectedText(e);else if(this.validateShortcutKeys(g,n))e.is_transaction_buttons_disabled||(this._stopEventPropagation(n),t.executeCommit(e));else if(this.validateShortcutKeys(v,n))e.is_transaction_buttons_disabled||(this._stopEventPropagation(n),t.executeRollback(e));else if(this.validateShortcutKeys(b,n))this._stopEventPropagation(n),t.saveDataChanges(e);else if(this.validateShortcutKeys(m,n))this._stopEventPropagation(n),t.openQueryTool(e);else if((this.isMac()&&n.metaKey||!this.isMac()&&n.ctrlKey)&&!n.altKey&&n.shiftKey&&191===o)this._stopEventPropagation(n),t.commentBlockCode(e);else if((this.isMac()&&!this.isKeyCtrlAltShift(n)&&n.metaKey||!this.isMac()&&!this.isKeyAltShift(n)&&n.ctrlKey)&&191===o)this._stopEventPropagation(n),t.commentLineCode(e);else if((this.isMac()&&!this.isKeyCtrlAltShift(n)&&n.metaKey||!this.isMac()&&!this.isKeyAltShift(n)&&n.ctrlKey)&&190===o)this._stopEventPropagation(n),t.uncommentLineCode(e);else if((this.isMac()&&n.metaKey||!this.isMac()&&n.ctrlKey)&&!n.altKey&&n.shiftKey&&75===o)this._stopEventPropagation(n),t.formatSql(e);else if(27==o)t.focusOut(e),(0,r.default)(n.target).hasClass("dropdown-item")&&(0,r.default)(n.target).closest(".dropdown-submenu").length>0&&(0,r.default)(n.target).closest(".dropdown-submenu").find(".dropdown-menu").removeClass("show");else if(this.validateShortcutKeys(f,n))this._stopEventPropagation(n),i=l(a,"right");else if(this.validateShortcutKeys(p,n))this._stopEventPropagation(n),i=l(a,"left");else if(this.validateShortcutKeys(h,n))this._stopEventPropagation(n),i=l(a,"switch");else if(38===o||40===o){if((0,r.default)(n.target).closest(".dropdown-menu").length>0){this._stopEventPropagation(n);var y=(0,r.default)(n.target).closest("li");for((0,r.default)(n.target).closest(".dropdown-menu").find(".show").removeClass("show"),38===o?y=y.prev():40===o&&(y=y.next());y.hasClass("dropdown-divider")||y.hasClass("d-none")||y.find(".dropdown-item").first().hasClass("disabled");)38===o?y=y.prev():40===o&&(y=y.next());y.find(".dropdown-item").trigger("focus")}}else if(37===o||39===o){if((0,r.default)(n.target).closest(".dropdown-menu").length>0){this._stopEventPropagation(n);var w=(0,r.default)(n.target).closest("li");if(39===o)w.hasClass("dropdown-submenu")&&(w.find(".dropdown-menu").addClass("show"),w.find(".dropdown-menu .dropdown-item").first().trigger("focus"));else if(37===o){var S=w.closest(".dropdown-menu");S.closest(".dropdown-submenu").length>0&&(S.removeClass("show"),(w=S.closest(".dropdown-submenu")).find(".dropdown-item").trigger("focus"))}}}else{var k=this.validateMacros(e,n);!1!==k&&(this._stopEventPropagation(n),t.executeMacro(e,k))}return i},t.focusDockerPanel=l,t.validateShortcutKeys=function(e,t){if(!e)return!1;var n=t.which||t.keyCode;return e.alt==t.altKey&&e.shift==t.shiftKey&&e.control==t.ctrlKey&&e.key.key_code==n},t.validateMacros=function(e,t){var n=t.which||t.keyCode,r=e.macros.filter((function(e){return e.alt==t.altKey&&e.control==t.ctrlKey&&e.key_code==n}));if(1==r.length)return r[0].id;return!1},t._stopEventPropagation=function(e){e.cancelBubble=!0,e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()},t.isMac=function(){return-1!=window.navigator.platform.search("Mac")},t.isKeyCtrlAlt=function(e){return e.ctrlKey||e.altKey},t.isKeyAltShift=function(e){return e.altKey||e.shiftKey},t.isKeyCtrlShift=function(e){return e.ctrlKey||e.shiftKey},t.isKeyCtrlAltShift=function(e){return e.ctrlKey||e.altKey||e.shiftKey},t.isAltShiftBoth=function(e){return e.altKey&&e.shiftKey&&!e.ctrlKey},t.isCtrlShiftBoth=function(e){return e.ctrlKey&&e.shiftKey&&!e.altKey},t.isCtrlAltBoth=function(e){return e.ctrlKey&&e.altKey&&!e.shiftKey},t.shortcut_key=s,t.shortcut_title=function(e,t){var n="";if(null==t)return n;t.alt&&(n=(0,a.default)("Alt")+"+");t.shift&&(n+=(0,a.default)("Shift")+"+");t.control&&(n+=(0,a.default)("Ctrl")+"+");return n+=s(t),"".concat(e," (").concat(n,")")},t.shortcut_accesskey_title=function(e,t){return"".concat(e," (")+(0,a.default)("accesskey")+" + ".concat(s(t),")")},n(74916),n(64765),n(92222),n(69826),n(57327);var r=i(n(19755)),a=i(n(91669)),o=n(44092);function i(e){return e&&e.__esModule?e:{default:e}}function s(e){var t="";return e.key&&e.key.char&&(t=e.key.char.toUpperCase()),t}function l(e,t){if(e){if(!e._focusFrame){if(0==e._frameList.length&&0==e._frameList[0]._panelList.length)return;e._frameList[0]._panelList[e._frameList[0]._curTab].focus()}var n=e._focusFrame,r=0,a=!1;if("switch"==t){var i,s=e._frameList.length;for(i=0;i<s&&n!==e._frameList[i];i++);r=(n=e._frameList[(0,o.getMod)(i+1,s)])._curTab,a=!0}else"left"==t?r=(0,o.getMod)(n._curTab-1,n._panelList.length):"right"==t&&(r=(0,o.getMod)(n._curTab+1,n._panelList.length));var l=n._panelList[r];return l.$container.find('*[tabindex]:not([tabindex="-1"])').trigger("focus"),l.focus(a),l._type}}},23602:(e,t,n)=>{n(69826);var r=i(n(19755)),a=i(n(81311)),o=i(n(1950));function i(e){return e&&e.__esModule?e:{default:e}}e.exports={modifyAcitreeAnimation:function(e,t){var n=e.get_preference("browser","enable_acitree_animation").value;a.default.isUndefined(t)&&(t=e.tree),n?t.options({animateRoot:!0,unanimated:!1,show:a.default.extend(t.options().show,{duration:75}),hide:a.default.extend(t.options().hide,{duration:75}),view:a.default.extend(t.options().view,{duration:75})}):t.options({animateRoot:!1,unanimated:!0,show:a.default.extend(t.options().show,{duration:0}),hide:a.default.extend(t.options().hide,{duration:0}),view:a.default.extend(t.options().view,{duration:0})})},modifyAlertifyAnimation:function(e){(a.default.isUndefined(e)||a.default.isNull(e))&&(e=o.default.pgAdmin.Browser),e.get_preference("browser","enable_alertify_animation").value?((0,r.default)(document).find("body").removeClass("alertify-no-animation"),a.default.each(document.getElementsByTagName("iframe"),(function(e){(0,r.default)(e.contentDocument).find("body").removeClass("alertify-no-animation")}))):((0,r.default)(document).find("body").addClass("alertify-no-animation"),a.default.each(document.getElementsByTagName("iframe"),(function(e){(0,r.default)(e.contentDocument).find("body").addClass("alertify-no-animation")})))}}},55112:(e,t,n)=>{var r;function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(82526),n(41817),n(32165),n(66992),n(78783),n(33948),n(74916),n(4723),n(54678),n(47042),n(15306),n(23123),n(91058),n(83710),n(41539),n(39714),void 0===(r=function(){var e=window.pgAdmin=window.pgAdmin||{};function t(e,t,n){return void 0===n||0==+n?Math[e](t):(t=+t,n=+n,isNaN(t)||n%1!=0?NaN:(t=t.toString().split("e"),+((t=(t=Math[e](+(t[0]+"e"+(t[1]?+t[1]-n:-n)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]+n:n))))}return function(e,t,n){function r(t,n,r,o){r=r||"width";var i,l,u,f=(n.match(d)||[])[2],p="px"===f?1:c[f+"toPx"];if(p||/r?em/i.test(f)&&!o)t=p?t:"rem"===f?s:"fontSize"===r&&+e.parentNode||t,p=p||parseFloat(a(t,"fontSize")),u=parseFloat(n)*p;else{l=(i=t.style)[r];try{i[r]=n}catch(e){return 0}u=i[r]?parseFloat(a(t,r)):0,i[r]=undefined!==l?l:null}return u}function a(e,t){var n,i,s,l,c,f=["paddingTop","paddingBottom","borderTop","borderBottom"],p=4;if(i=e.style["pixel"+t.charAt(0).toUpperCase()+t.slice(1)],"%"===(s=((n=u?u(e)[t]:i?i+"px":"fontSize"===t?r(e,"1em","left",1)+"px":e.currentStyle[t]).match(d)||[])[2])&&o)if(/^top|bottom/.test(t)){for(l=(c=e.parentNode||e).offsetHeight;p--;)l-=parseFloat(a(c,f[p]));n=parseFloat(n)/100*l+"px"}else n=r(e,n);else("auto"===n||s&&"px"!==s)&&u?n=0:s&&"px"!==s&&!u&&(n=r(e,n)+"px");return n}var o,i=t.createElement("test"),s=t.documentElement,l=t.defaultView,u=l&&l.getComputedStyle,d=/^(-?[\d+\.\-]+)([a-z]+|%)$/i,c={},f=[1/25.4,1/2.54,1/72,1/6],p=["mm","cm","pt","pc","in","mozmm"],h=6;for(s.appendChild(i),u&&(i.style.marginTop="1%",o="1%"===u(i).marginTop);h--;)c[p[h]+"toPx"]=f[h]?f[h]*c.inToPx:r(i,"1"+p[h]);s.removeChild(i),e.toPx=r}(e,window.document),e.natural_sort=function(e,t,n){n=n||{};var r,o,i=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,s=/(^[ ]*|[ ]*$)/g,l=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,u=/^0x[0-9a-f]+$/i,d=/^0/,c=function(e){return n.insensitive&&(""+e).toLowerCase()||""+e},f=c(e).replace(s,"")||"",p=c(t).replace(s,"")||"",h=f.replace(i,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),_=p.replace(i,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),g=parseInt(f.match(u))||1!==h.length&&f.match(l)&&Date.parse(f),v=parseInt(p.match(u))||g&&p.match(l)&&Date.parse(p)||null,b=n.desc?-1:1;if(v){if(g<v)return-1*b;if(g>v)return 1*b}for(var m=0,y=Math.max(h.length,_.length);m<y;m++){if(r=!(h[m]||"").match(d)&&parseFloat(h[m])||h[m]||0,o=!(_[m]||"").match(d)&&parseFloat(_[m])||_[m]||0,isNaN(r)!==isNaN(o))return(isNaN(r)?1:-1)*b;if(a(r)!==a(o)&&(r+="",o+=""),r<o)return-1*b;if(r>o)return 1*b}return 0},e.numeric_comparator=function(e,t){return(e=parseInt(e))<(t=parseInt(t))?-1:e==t?0:1},Math.round10||(Math.round10=function(e,n){return t("round",e,n)}),Math.floor10||(Math.floor10=function(e,n){return t("floor",e,n)}),Math.ceil10||(Math.ceil10=function(e,n){return t("ceil",e,n)}),e}.apply(t,[]))||(e.exports=r)},75471:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(e.showOnScroll){var t=r.default.fn.select2.amd.require("select2/utils"),n=function(e,t){this.$element=e,this.options=t,this._dataToConvert=t.get("data")||[]},o=null;o=null!=e.data?r.default.fn.select2.amd.require("select2/data/array"):r.default.fn.select2.amd.require("select2/data/select"),t.Extend(n,o),n.prototype.query=function(e,t){var n=[],a=this;e.page||(e.page=1);this.$element.children().each((function(){var t=(0,r.default)(this);if(t.is("option")||t.is("optgroup")){var o=a.item(t),i=a.matches(e,o);null!==i&&n.push(i)}})),t({results:n.slice(20*(e.page-1),20*e.page),pagination:{more:n.length>=20*e.page}})},e.minimumInputLength>0&&(n=t.Decorate(n,r.default.fn.select2.amd.require("select2/data/minimumInputLength"))),e.maximumInputLength>0&&(n=t.Decorate(n,r.default.fn.select2.amd.require("select2/data/maximumInputLength"))),e.maximumSelectionLength>0&&(n=t.Decorate(n,r.default.fn.select2.amd.require("select2/data/maximumSelectionLength"))),e.tags&&(n=t.Decorate(n,r.default.fn.select2.amd.require("select2/data/tags"))),null==e.tokenSeparators&&null==e.tokenizer||(n=t.Decorate(n,r.default.fn.select2.amd.require("select2/data/tokenizer"))),e.dataAdapter=n,a.default.isUndefined(e.ajax)&&(e.ajax={})}return e},n(47042),n(20454);var r=o(n(19755)),a=o(n(81311));function o(e){return e&&e.__esModule?e:{default:e}}},81240:(e,t,n)=>{var r,a;function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw o}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(41539),n(68309),n(91038),n(78783),n(82526),n(41817),n(32165),n(66992),n(33948),n(69600),n(74916),n(15306),n(47042),n(54678),n(9653),n(79753),r=[n(19755),n(81311),n(91669),n(28008),n(55455)],void 0===(a=function(e,t,n,r,a){var i={epicRandomString:function(e){for(var t=[],n="0123456789abcdef",r=0;r<36;r++)t[r]=n.substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]=n.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("").replace(/-/g,"").substr(0,e)},getHash:function(e){for(var t=0,n=e.length,r=0;r<n;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t},calculateColumnWidth:function(t){e("body").append('<span id="pg_text" style="visibility: hidden;">'+t+"</span>");var n=e("#pg_text").width()+23;return e("#pg_text").remove(),n},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},disable_connection_dropdown:function(t){t?(e(".conn-info-dd").prop("disabled",!0),e(".connection-data").css({pointerEvents:"none",cursor:"arrow"})):(e(".conn-info-dd").prop("disabled",!1),e(".connection-data").css({pointerEvents:"auto",cursor:"pointer"}))},previousStatus:null,fetchConnectionStatus:function(t,a,o){var s=r("sqleditor.connection_status",{trans_id:t.transId});if("visible"===document.visibilityState&&"visible"===a.data("panel-visible")&&!o.hasClass("obtaining-conn")){var l=t;e.ajax({url:s,method:"GET"}).done((function(e){if(e&&e.data){var t=e.data.status,r=e.data.message,s=!1;switch(l.update_notifications(e.data.notifies),t){case 1:t!=i.previousStatus||o.hasClass("fa-hourglass-half")||(o.removeClass().addClass("fa fa-hourglass-half"),s=!0);break;case 2:i.previousStatus==t||o.hasClass("fa-clock")||(o.removeClass().addClass("fa fa-clock"),s=!0);break;case 3:i.previousStatus==t||o.hasClass("fa-exclamation-circle")||(o.removeClass().addClass("fa fa-exclamation-circle"),s=!0);break;case 4:i.previousStatus==t||o.hasClass("fa-exclamation-triangle")||(o.removeClass().addClass("fa fa-exclamation-triangle"),s=!0);break;default:i.previousStatus==t||o.hasClass("fa-query_tool_connected")||(o.removeClass().addClass("pg-font-icon icon-connected"),s=!0)}i.previousStatus=t,s&&(a.popover("hide"),a.attr("data-content",r))}else i.previousStatus=-99,r=n("An unexpected error occurred - ensure you are logged into the application."),a.attr("data-content",r),o.hasClass("icon-disconnected")||(a.popover("hide"),o.removeClass().addClass("pg-icon-font icon-disconnected"))})).fail((function(e){i.previousStatus=-1;var t=n("Transaction status check failed.");0==e.readyState?t=n("Not connected to the server or the connection to the server has been closed."):e.responseJSON&&e.responseJSON.errormsg&&(t=e.responseJSON.errormsg),a.attr("data-content",t),o.hasClass("icon-disconnected")||(a.popover("hide"),o.removeClass().addClass("pg-font-icon icon-disconnected"))}))}},updateConnectionStatusFlag:function(t){var n=e(".connection_status");n.data("panel-visible")!=t&&n.data("panel-visible",t)},calcFontSize:function(e){if(e){e=parseFloat(Math.round(parseFloat(e+"e+2"))+"e-2");var t=Number(e);if(t>0)return t+"em"}return"1em"},addEditableIcon:function(e,n){var r={cssClass:"editable-column-header-icon",content:n?'<i class="fa fa-pencil-alt"></i>':'<i class="fa fa-lock"></i>'};t.isUndefined(e.header)||t.isUndefined(e.header.buttons)?e.header={buttons:[r]}:e.header.buttons.push(r)},isModalOpen:function(e){if(Array.isArray(e)){var t,n=o(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;try{if(a.dialog(r)&&a.dialog(r).isOpen())return!0}catch(e){console.warn(e.stack||e)}}}catch(e){n.e(e)}finally{n.f()}}return!1}};return i}.apply(t,r))||(e.exports=a)},82794:(e,t,n)=>{var r=n(64492);function a(e){var t=0,n=0,a={};do{var i=e.getData();if(i._type in this.Nodes&&this.Nodes[i._type].hasId){var s=o(i._type,n);void 0===a[s]&&(a[s]=r.extend({},i,{priority:t}),t-=1)}n+=1,e=e.hasParent()?e.parent():null}while(e);return a}function o(e,t){return"partition"===e&&t>0?"table":e}n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.getTreeNodeHierarchyFromElement=function(e,t){return a.call(e,t)},t.getTreeNodeHierarchyFromIdentifier=function(e){var t=this.treeMenu.translateTreeNodeIdFromACITree(e),n=this.treeMenu.findNode(t);return null===n?null:a.call(this,n)},t.getTreeNodeHierarchy=a},77019:(e,t,n)=>{n(79753),n(82526),n(41817),n(41539),n(32165),n(66992),n(78783),n(33948),n(91038),n(47042),n(68309),n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.browserTreeState=t.pgBrowser=void 0,n(32564),n(69600),n(69826),n(74916),n(64765),n(82772),n(23123),n(40561);var r=l(n(81311)),a=l(n(19755)),o=l(n(28008)),i=l(n(91669)),s=l(n(55112));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c=s.default.Browser=s.default.Browser||{};t.pgBrowser=c;var f=c.browserTreeState=c.browserTreeState||{};t.browserTreeState=f,r.default.extend(c.browserTreeState,{parent:"server",orig_parent:"server_group",stored_state:{},last_state:{},current_state:{},init:function(){var e=c.get_preference("browser","browser_tree_state_save_interval");r.default.isUndefined(e)||-1===e.value?r.default.isUndefined(e)||a.default.ajax({url:(0,o.default)("settings.reset_tree_state"),type:"DELETE"}).fail((function(e){var t=e.responseText;if(417==e.status||410==e.status||500==e.status)try{t=JSON.parse(e.responseText).errormsg}catch(e){console.warn(e.stack||e)}console.warn((0,i.default)('Error resetting the tree saved state."'),t)})):(setInterval(this.save_state,1e3*e.value),this.fetch_state.apply(this),c.Events.on("pgadmin:browser:tree:expand-from-previous-tree-state",this.expand_from_previous_state,this),c.Events.on("pgadmin:browser:tree:remove-from-tree-state",this.remove_from_cache,this),c.Events.on("pgadmin:browser:tree:update-tree-state",this.update_cache,this))},save_state:function(){var e=c.browserTreeState;e.last_state!=JSON.stringify(e.current_state)&&a.default.ajax({url:(0,o.default)("settings.save_tree_state"),type:"POST",contentType:"application/json",data:JSON.stringify(e.current_state)}).done((function(){e.last_state=JSON.stringify(e.current_state)})).fail((function(e){var t=e.responseText;if(417==e.status||410==e.status||500==e.status)try{t=JSON.parse(e.responseText).errormsg}catch(e){console.warn(e.stack||e)}console.warn((0,i.default)('Error saving the tree state."'),t)}))},fetch_state:function(){var e=this;a.default.ajax({url:(0,o.default)("settings.get_tree_state"),type:"GET",dataType:"json",contentType:"application/json"}).done((function(t){e.stored_state=t})).fail((function(e){var t=e.responseText;if(417==e.status||410==e.status||500==e.status)try{t=JSON.parse(e.responseText).errormsg}catch(e){console.warn(e.stack||e)}console.warn((0,i.default)("Error fetching the tree state."),t)}))},update_cache:function(e){var t,n=e&&c.tree.itemData(e),a=(n&&c.Nodes[n._type]).getTreeNodeHierarchy(e),o=c.tree.pathId(e),i=o.join(),s=[],l=-1;if(c.tree.hasParent(e)&&this.parent in a){if(t=a[this.parent]._id,c.tree.isOpen(e)){o.push(n.id),s=o.join(),t in this.current_state||(this.current_state[t]={paths:[],selected:{},conn_status:{},is_opened:{}});var u=r.default.find(this.current_state[t].paths,(function(e){return-1!==e.search(s)}));r.default.isUndefined(u)&&(r.default.isUndefined(this.current_state[t].paths)?this.current_state[t].paths=[]:l=this.current_state[t].paths.indexOf(i),-1!==l?this.current_state[t].paths[l]=s:this.current_state[t].paths.push(s))}this.update_database_status(e),this.update_current_selected_item(a)}},remove_from_cache:function(e){var t=this,n=t.stored_state||{},a=e&&c.tree.itemData(e),o=a&&c.Nodes[a._type],i=o&&o.getTreeNodeHierarchy(e);if(null!==i&&c.tree.hasParent(e)&&i.hasOwnProperty(t.parent)){var s=i&&i[t.parent]._id,l=i&&i[t.orig_parent].id;if(this.update_database_status(e),a._type!=t.parent&&"database"!=a._type){if(c.tree.isClosed(e)){var u=t.current_state[s].paths,d=void 0;if(i.hasOwnProperty("database")&&(d=i.database.id),!r.default.isUndefined(u)&&!r.default.isUndefined(u.length)){var f=0,p=void 0;r.default.each(u,(function(e){if(!r.default.isUndefined(e)){var n=e.split(",");if(-1!==n.indexOf(a.id)&&(void 0===d||void 0!==d&&-1!==n.indexOf(d))){var o=n.indexOf(a.id);n.splice(o),(p=n.join())==l?t.current_state[s].paths.splice(e,1):t.current_state[s].paths[f]=p}f++}}))}}}else s in n&&"paths"in n[s]&&(n[s].paths=t.current_state[s].paths,t.save_state())}},expand_from_previous_state:function(e){var t=this,n=t.stored_state||{},a=e&&c.tree.itemData(e),o=a&&c.Nodes[a._type],i=o&&o.getTreeNodeHierarchy(e);if(null!==i&&c.tree.hasParent(e)&&i.hasOwnProperty(t.parent)&&(a._type!=t.parent||!1!==c.tree.isOpen(e))){var s=n[i[t.parent]._id];if(!("database"==a._type&&s&&"conn_status"in s&&"is_opened"in s)||0!==s.conn_status[a.id]&&0!==s.is_opened[a.id]&&a.id in s.is_opened){if(!r.default.isUndefined(s)&&"paths"in s&&!r.default.isUndefined(s.paths.length)){var l=u(s.paths),d=void 0;i.hasOwnProperty("database")&&(d=i.database.id),r.default.each(l,(function(o){if(!r.default.isUndefined(o)){var s=o.split(",");if(-1!==s.indexOf(a.id)&&(void 0===d||void 0!==d&&-1!==s.indexOf(d))){var l=s.indexOf(a.id);if(c.tree.toggle(e),l==s.length-1){var u=n[i[t.parent]._id].paths.indexOf(o);n[i[t.parent]._id].paths.splice(u,1)}}}}))}this.select_tree_item(e)}}},update_database_status:function(e){var t=e&&c.tree.itemData(e),n=(t&&c.Nodes[t._type]).getTreeNodeHierarchy(e);if(n.hasOwnProperty("database")){var r=n.database.id,a=n&&n[this.parent]._id;a in this.current_state&&"selected"in this.current_state[a]&&(n.database.connected?this.current_state[a].conn_status[r]=1:this.current_state[a].conn_status[r]=0,"database"==t._type&&(c.tree.isOpen(e)?this.current_state[a].is_opened[r]=1:this.current_state[a].is_opened[r]=0))}},update_current_selected_item:function(e){if(this.parent in e){var t=e&&e[this.parent]._id,n=c.tree.itemData(c.tree.selected()),a=void 0;n=n?n.id:void 0,e.hasOwnProperty("database")&&(a=e.database.id),t in this.current_state&&"selected"in this.current_state[t]&&!r.default.isUndefined(n)&&(this.current_state[t].selected[e[this.parent].id]=n,r.default.isUndefined(a)||(this.current_state[t].selected[a]=n))}},select_tree_item:function(e){var t=this.stored_state||{},n=e&&c.tree.itemData(e),r=n&&c.Nodes[n._type],a=r&&r.getTreeNodeHierarchy(e),o=t[a[this.parent]._id];if(a.hasOwnProperty("database")){var i=a.database.id;o&&"selected"in o&&i in o.selected&&o.selected[i]==n.id&&c.tree.select(e)}}})},79226:(e,t,n)=>{var r=n(64492);n(82526),n(41817),n(32165),n(66992),n(78783),n(33948),n(57327),n(38880),n(49337),n(33321),Object.defineProperty(t,"__esModule",{value:!0}),t.isValidTreeNodeData=t.Tree=t.TreeNode=void 0,n(19601),n(41539),n(88674),n(32564),n(89554),n(54747),n(47941),n(74916),n(23123),n(15306),n(69826),n(69600),n(79753),n(23157),n(24812),n(82772),n(69070);var a=n(44092),o=s(n(19755)),i=s(n(55455));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}var _=function(){function e(t,n,r,a){f(this,e),this.id=t,this.data=n,this.setParent(a),this.children=[],this.domNode=r}return h(e,[{key:"hasParent",value:function(){return null!==this.parentNode&&void 0!==this.parentNode}},{key:"parent",value:function(){return this.parentNode}},{key:"setParent",value:function(e){this.parentNode=e,this.path=this.id,null!=e&&void 0!==e.path&&(this.path=e.path+"."+this.id)}},{key:"getData",value:function(){if(void 0!==this.data)return null===this.data?null:Object.assign({},this.data)}},{key:"getHtmlIdentifier",value:function(){return this.domNode}},{key:"reload",value:function(e){var t=this;return new Promise((function(n){t.unload(e).then((function(){e.aciTreeApi.setInode(t.domNode),e.aciTreeApi.deselect(t.domNode),setTimeout((function(){e.selectNode(t.domNode)}),0),n()}))}))}},{key:"unload",value:function(e){var t=this;return new Promise((function(n,r){t.children=[],e.aciTreeApi.unload(t.domNode,{success:function(){n(!0)},fail:function(){r()}})}))}},{key:"open",value:function(e,t){var n=this;return new Promise((function(r,a){!t||null!=n.domNode&&void 0!==n.domNode?e.aciTreeApi.isOpen(n.domNode)?r(!0):e.aciTreeApi.open(n.domNode,{success:function(){r(!0)},fail:function(){a(!0)}}):r(!0)}))}},{key:"ancestorNode",value:function(e){for(var t=this;t.hasParent();)if(e(t=t.parent()))return t;return null}},{key:"anyFamilyMember",value:function(e){return!!e(this)||null!==this.ancestorNode(e)}},{key:"anyParent",value:function(e){return null!==this.ancestorNode(e)}}]),e}();t.TreeNode=_;var g=function(){function e(){f(this,e),this.rootNode=new _(void 0,{}),this.aciTreeApi=void 0,this.draggableTypes={}}return h(e,[{key:"registerDraggableType",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;"object"==c(e)?Object.keys(e).forEach((function(n){t.registerDraggableType(n,e[n])})):null!=n&&e.replace(/ +/," ").split(" ").forEach((function(e){t.draggableTypes[e]=n}))}},{key:"getDraggable",value:function(e){return this.draggableTypes[e]?this.draggableTypes[e]:null}},{key:"prepareDraggable",value:function(e,t){var n=this.getDraggable(e._type);null!=n&&t.find(".aciTreeItem").attr("draggable",!0)[0].addEventListener("dragstart",(function(a){var i=n(e,t);if("string"==typeof i?i={text:i,cur:{from:i.length,to:i.length}}:i.cur||(i=u(u({},i),{},{cur:{from:i.text.length,to:i.text.length}})),a.dataTransfer.setData("text",JSON.stringify(i)),a.dataTransfer.dropEffect&&(a.dataTransfer.dropEffect="move"),a.dataTransfer.setDragImage){var s=(0,o.default)('\n              <div class="drag-tree-node">\n                <span>'.concat(r.escape(i.text),"</span>\n              </div>"));(0,o.default)("body .drag-tree-node").remove(),(0,o.default)("body").append(s),a.dataTransfer.setDragImage(s[0],0,0)}}))}},{key:"addNewNode",value:function(e,t,n,r){var a=this.findNode(r);return this.createOrUpdateNode(e,t,a,n)}},{key:"findNode",value:function(e){return null==e||0===e.length?this.rootNode:function(e,t){if(null===t)return e;return function e(n){if(void 0!==n.path&&void 0!==t&&!t.startsWith(n.path))return null;for(var r=0,a=n.children.length;r<a;r++){var o=e(n.children[r]);if(null!==o)return o}return n.path===t?n:null}(e)}(this.rootNode,e.join("."))}},{key:"findNodeWithToggle",value:function(e){var t=this;if(null==e||!Array.isArray(e))return Promise.reject();e=e.join(".");var n=function(t){return void 0!==t&&void 0!==e&&(e.startsWith(t+".")||e===t)};return function r(a){return new Promise((function(o,i){null!=e&&0!==e.length||o(null),void 0===a.path||n(a.path)?a.path===e?o(a):a.open(t,!0).then((function(){for(var e=0,t=a.children.length;e<t;e++){var s=a.children[e];if(n(s.path))return void o(r(s))}i(null)})).catch((function(){i(null)})):i(null)}))}(this.rootNode)}},{key:"findNodeByDomElement",value:function(e){var t=this.translateTreeNodeIdFromACITree(e);if(t&&t[0])return this.findNode(t)}},{key:"selected",value:function(){return this.aciTreeApi.selected()}},{key:"scrollTo",value:function(e){e.scrollIntoView()}},{key:"selectNode",value:function(e,t){this.aciTreeApi.select(e),t&&this.scrollTo(e[0])}},{key:"createOrUpdateNode",value:function(e,t,n,r){var a=[e];null!=n&&(a=[n.path,e]);var o=this.findNode(a);if(null!==o)return o.data=t,o.domNode=r,o;var i=new _(e,t,r,n);return n===this.rootNode&&(i.parentNode=null),null!=n&&n.children.push(i),i}},{key:"unloadNode",value:function(e,t,n,r){var a=[e],o=this.findNode(r);null!=o&&(a=[o.path,e]);var i=this.findNode(a);i&&(i.children=[])}},{key:"register",value:function(e){var t=this;e.on("acitree",function(e,t,n,r){if(t.isItem(n)&&-1!=["added","idset","beforeunload"].indexOf(r)){var a=t.getId(n),o=t.itemData(n),s=this.translateTreeNodeIdFromACITree(t.parent(n));"beforeunload"===r?this.unloadNode(a,o,n,s):("added"===r&&this.prepareDraggable(o,n),this.addNewNode(a,o,n,s)),o.errmsg&&i.default.error(o.errmsg)}}.bind(this)),this.aciTreeApi=e.aciTree("api");var n=function(e){var n=t.aciTreeApi.itemFrom(e.target);n.length&&(e.ctrlKey&&t.aciTreeApi.select(n),(0,o.default)(n).on("contextmenu:visible",(function(){(0,o.default)(n).trigger("blur"),(0,o.default)(n).off("contextmenu:visible")})))};e.off("mousedown",n).on("mousedown",n)}},{key:"translateTreeNodeIdFromACITree",value:function(e){for(var t=e,n=[];null!=t&&t.length>0&&(n.unshift(this.aciTreeApi.getId(t)),this.aciTreeApi.hasParent(t));)t=this.aciTreeApi.parent(t);return n}}]),e}();t.Tree=g;var v=a.isValidData;t.isValidTreeNodeData=v},30726:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.retrieveAncestorOfTypeServer=function(e,t,n,r){var o=null,i=t||e.treeMenu.selected(),s=e.treeMenu.findNodeByDomElement(i);if(s){var l,u=s.ancestorNode((function(e){return"database"===(l=e.getData())._type})),d=function(e){return"server"===(l=e.getData())._type};null!==u?l._label.indexOf("=")>=0?r.alert((0,a.default)(n),(0,a.default)("Databases with = symbols in the name cannot be backed up or restored using this utility.")):u.anyParent(d)&&(o=l):s.anyFamilyMember(d)&&(o=l)}null===o&&r.alert((0,a.default)(n),(0,a.default)("Please select server or child node from the browser tree."));return o},t.retrieveAncestorOfTypeDatabase=function(e,t,n,r){var o=null,i=t||e.treeMenu.selected(),s=e.treeMenu.findNodeByDomElement(i);if(s)if("database"===s.getData()._type)o=s.getData();else{var l=null;s.ancestorNode((function(e){return"database"===(l=e.getData())._type&&(o=l,!0)}))}null===o&&r.alert((0,a.default)(n),(0,a.default)("Please select a database or its child node from the browser."));return o},n(82772);var r,a=(r=n(91669))&&r.__esModule?r:{default:r}},28008:(e,t,n)=>{var r,a;n(74916),n(15306),r=[n(8012)],void 0===(a=function(e){return function(t,n){var r=e[t],a=r;return r?a=a.replace(/([<])([^:^>]*:)?([^>]+)([>])/g,(function(e,t,r,a){return a in n?n[a]:e})):r}}.apply(t,r))||(e.exports=a)},44092:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.parseShortcutValue=function(e){var t="";e.alt&&(t+="alt+");e.shift&&(t+="shift+");e.control&&(t+="ctrl+");return t+=e.key.char.toLowerCase()},t.handleKeyNavigation=function(e){var t=(0,o.default)(e.currentTarget).find(".wizard-header"),n=(0,o.default)(e.currentTarget).find(".wizard-footer"),r=(0,o.default)(e.currentTarget).find(".select-row-cell:first"),a=(0,o.default)(e.currentTarget).find(".select-row-cell:last"),i=(0,o.default)(t).find("button:enabled:first"),s=(0,o.default)(t).find("button:enabled:last"),l=(0,o.default)(n).find("button:enabled:last"),u=(0,o.default)(n).find("button:enabled:first");e.shiftKey&&9===e.keyCode?i&&(0,o.default)(i).is((0,o.default)(e.target))?l&&((0,o.default)(l).focus(),e.preventDefault(),e.stopPropagation()):(0,o.default)(u).is((0,o.default)(e.target))&&((0,o.default)(r).find(".custom-control-input").is(":visible")?((0,o.default)(a).find(".custom-control-input").focus(),e.preventDefault(),e.stopPropagation()):(0,o.default)(e.currentTarget).find(".wizard-content").find(".CodeMirror-scroll").is(":visible")&&(0,o.default)(s).focus()):9===e.keyCode?l&&(0,o.default)(l).is((0,o.default)(e.target))?((0,o.default)(i).focus(),e.preventDefault(),e.stopPropagation()):"Name"==e.target.innerText?((0,o.default)(r).find(".custom-control-input").is(":visible")?(0,o.default)(r).find(".custom-control-input").focus():(0,o.default)(u).focus(),e.preventDefault(),e.stopPropagation()):"DIV"==e.target.tagName?((0,o.default)(e.currentTarget).find(".custom-control-input:first").trigger("focus"),e.preventDefault(),e.stopPropagation()):"TEXTAREA"==e.target.tagName&&(0,o.default)(u).focus():27===e.keyCode&&(0,o.default)(t).find("button.ajs-close").click()},t.findAndSetFocus=function(e){if(0==e.length)return;setTimeout((function(){var t=e.find("button.fa-plus:first");0==t.length&&(t=e.find("\n          .pgadmin-controls:first .btn:not(.toggle),\n          .pgadmin-controls:first,\n          .ajs-commands:first,\n          .CodeMirror-scroll,\n          .pgadmin-wizard").find('*[tabindex]:not([tabindex="-1"]),input:enabled')),t.length>0?t[0].focus():e[0].focus()}),200)},t.getEpoch=function(e){var t=e||new Date;return parseInt(t.getTime()/1e3)},t.getGCD=function(e){var t=function e(t,n){return 0==t?n:e(n%t,t)},n=e.length;if(n<=2)return t(e[0],e[1]);for(var r=e[0],a=1;a<n;a++)r=t(e[a],r);return r},t.getMod=function(e,t){return(e%t+t)%t},t.parseFuncParams=function(e){var t=[],n="",r="";if(e.endsWith("()"))n=e.substring(0,e.length-2);else if(e.endsWith(")")){if(!e.endsWith("()")&&e.endsWith(")")){var a=0,o=e.length;for(a=e.length-2;a>=0;){if("("==e[a]){o=a;break}if('"'==e[a])for(a--;'"'!=e[a];)a--;a--}n=e.substring(0,o),r=e.substring(o+1,e.length-1);var i=0,s="",l=["IN","OUT","INOUT","VARIADIC"];for(a=0;a<r.length;){if('"'==r[a])for(a++;'"'!=r[a];)a++;else" "==r[a]?(""==s||l.indexOf(s)>-1)&&(s=r.substring(i,a),i=a+1):","==r[a]&&(t.push([s,r.substring(i,a)]),s="",i=a+1);a++}t.push([s,r.substring(i)])}}else n=e;return{func_name:n,param_string:r,params:t}},t.quote_ident=u,t.fully_qualify=function(e,t,n){var r=a.getTreeNodeHierarchyFromIdentifier.call(e,n),o="";void 0!==r.schema?o=u(r.schema._label):void 0!==r.view?o=u(r.view._label):void 0!==r.catalog&&(o=u(r.catalog._label));void 0!==r.package&&"package"!=t._type&&(""==o?o=u(r.package._label):o+="."+u(r.package._label));return""!=o?o+"."+u(t._label):u(t._label)},t.getRandomInt=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},t.titleize=function(e){return""===e||null===e?e:e.split(" ").map((function(e){return e[0].toUpperCase()+e.substr(1).toLowerCase()})).join(" ")},t.sprintf=function(e){try{var t=arguments;return e.split("%s").map((function(e,n){return n>0?n<t.length?[t[n],e].join(""):["%s",e].join(""):e})).join("")}catch(t){return console.error(t),e}},t.CSVToArray=function(e,t,n){t=t||",",n=n||'"';var r=new RegExp("(\\"+t+"|\\r?\\n|\\r|^)"+('"'==n?'(?:"([^"]*(?:""[^"]*)*)"|':"(?:'([^']*(?:''[^']*)*)'|")+('"'==n?'([^"\\'+t+"\\r\\n]*))":"([^'\\"+t+"\\r\\n]*))"),"gi"),a=[[]],o=null;for(;o=r.exec(e);){var i,s=o[1];s.length&&s!==t&&a.push([]),i=o[2]?o[2].replace(new RegExp(n+n,"g"),n):o[3],a[a.length-1].push(i)}return a},t.hasBinariesConfiguration=function(e,t,n){var a="paths",o="pg_bin_dir",s=(0,i.default)("Please configure the PostgreSQL Binary Path in the Preferences dialog.");(t.type&&"ppas"===t.type||"ppas"===t.server_type)&&(o="ppas_bin_dir",s=(0,i.default)("Please configure the EDB Advanced Server Binary Path in the Preferences dialog."));var l=e.get_preference(a,o);if(!l)return n.alert((0,i.default)("Preferences Error"),(0,i.default)("Failed to load preference %s of module %s",o,a)),!1;if(r.default.isUndefined(l.value)||(u=l.value,d=t.version,c=!1,f=!1,p=JSON.parse(u),r.default.each(p,(function(e){d>=e.version&&d<e.next_major_version&&(r.default.isUndefined(e.binaryPath)||r.default.isNull(e.binaryPath)||""===e.binaryPath.trim()||(f=!0)),e.isDefault&&(c=!0)})),!(f|c)))return n.alert((0,i.default)("Configuration required"),s),!1;var u,d,c,f,p;return!0},t.registerDetachEvent=function(e){e.on(l.EVENT.DETACHED,(function(){(0,o.default)(this.$container[0].ownerDocument).find(".wcIFrameFloating").attr({style:"z-index: 1200"})})),e.on(l.EVENT.ORDER_CHANGED,(function(){(0,o.default)(this.$container[0].ownerDocument).find(".wcIFrameFloating").attr({style:"z-index: 1200"})})),e.on(l.EVENT.ORDER_CHANGED,(function(){var e=this.docker(this._panel).$container.offset(),t=this.$container.offset(),n=this.$container.width(),r=this.$container.height();(0,o.default)(this.$container[0].ownerDocument).find(".wcIFrameFloating").css("top",t.top-e.top),(0,o.default)(this.$container[0].ownerDocument).find(".wcIFrameFloating").css("left",t.left-e.left),(0,o.default)(this.$container[0].ownerDocument).find(".wcIFrameFloating").css("width",n),(0,o.default)(this.$container[0].ownerDocument).find(".wcIFrameFloating").find(".wcIFrameFloating").css("height",r)}))},t.isString=t.isFunction=t.isValidData=void 0,n(69826),n(32564),n(83710),n(91058),n(27852),n(82772),n(74916),n(64765),n(15306),n(69600),n(21249),n(23123),n(24603),n(39714),n(73210);var r=s(n(81311)),a=n(82794),o=s(n(19755)),i=s(n(91669));function s(e){return e&&e.__esModule?e:{default:e}}n(35816);var l=window.wcDocker;t.isValidData=function(e){return!r.default.isUndefined(e)&&!r.default.isNull(e)};t.isFunction=function(e){return r.default.isFunction(e)};function u(e){var t=!1;return isNaN(parseInt(e))||(t=!0),e.search(/[^a-z0-9_]/g)>-1&&(e=e.replace(/"/g,'""'),t=!0),t?'"'.concat(e,'"'):e}t.isString=function(e){return r.default.isString(e)}},1950:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function e(t){return t.opener&&t.opener.pgAdmin?e(t.opener):t},a=function(){var e=null;try{e=window.opener&&window.opener.pgAdmin?r(window.opener):window.parent&&window.parent.pgAdmin?window.parent:window.top&&window.top.pgAdmin?window.top:window}catch(t){e=window}return e}();t.default=a},9807:(e,t,n)=>{var r=n(64492);n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.getDatabaseLabel=u,t.getPanelTitle=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=e.get_preferences_for_module("browser");null==t&&null==r&&(t=e.treeMenu.selected());if(null==r&&d(r=a.getTreeNodeHierarchyFromIdentifier.call(e,t)))return;i||(i=u(r));var c="";c=o?l.qt_default_placeholder:n||s.qt_tab_title_placeholder;var p={database:i,username:r.server.user.name,server:r.server.label,type:"query_tool"},h=f(c,p);return h},t.setQueryToolDockerTitle=function(e,t,n,a){var i="",s="";c(e,a),a||"true"==a?(s=(0,o.default)("File - ")+n,i="fa fa-file-alt"):"false"==t||0==t?(s=(0,o.default)("View/Edit Data - ")+n,i="pg-font-icon icon-view_data"):(s=(0,o.default)("Query Tool - ")+n,i="pg-font-icon icon-query_tool");e.title('<span title="'+r.escape(s)+'">'+r.escape(n)+"</span>"),e.icon(i)},t.set_renamable_option=c,t.generateTitle=f,t.refresh_db_node=function(e,t){i.default.alert().setting({title:(0,o.default)("Database moved/renamed"),label:(0,o.default)("OK"),message:(0,o.default)(e),onok:function(){l.Browser.Nodes.database.callbacks.refresh(void 0,t)}}).show()},n(68309),n(74916),n(15306),n(24603),n(39714);var a=n(82794),o=s(n(91669)),i=s(n(55455));function s(e){return e&&e.__esModule?e:{default:e}}var l=s(n(1950)).default.pgAdmin;function u(e){return e.database?e.database.label:e.server.db}function d(e){return void 0===e.server}function c(e,t){t||"true"==t?e.renamable(!1):e.renamable(!0)}function f(e,t){return"query_tool"==t.type?e=(e=(e=e.replace(new RegExp("%DATABASE%"),r.unescape(t.database))).replace(new RegExp("%USERNAME%"),r.unescape(t.username))).replace(new RegExp("%SERVER%"),r.unescape(t.server)):"datagrid"==t.type?e=(e=(e=(e=(e=e.replace(new RegExp("%DATABASE%"),r.unescape(t.database))).replace(new RegExp("%USERNAME%"),r.unescape(t.username))).replace(new RegExp("%SERVER%"),r.unescape(t.server))).replace(new RegExp("%SCHEMA%"),r.unescape(t.schema))).replace(new RegExp("%TABLE%"),r.unescape(t.table)):"debugger"==t.type?e=(e=(e=(e=e.replace(new RegExp("%FUNCTION%"),r.unescape(t.function_name))).replace(new RegExp("%ARGS%"),r.unescape(t.args))).replace(new RegExp("%SCHEMA%"),r.unescape(t.schema))).replace(new RegExp("%DATABASE%"),r.unescape(t.database)):"psql_tool"==t.type&&(e=(e=(e=e.replace(new RegExp("%DATABASE%"),r.unescape(t.database))).replace(new RegExp("%USERNAME%"),r.unescape(t.username))).replace(new RegExp("%SERVER%"),r.unescape(t.server))),r.escape(e)}},19577:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(66992),n(41539),n(78783),n(4129),n(33948),n(69070),n(38880),n(82526),n(41817),n(32165);var a=f(n(91669)),o=f(n(28008)),i=f(n(19755)),s=f(n(81311)),l=f(n(55112)),u=f(n(58894)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}a.default=e,n&&n.set(e,a);return a}(n(87789));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function f(e){return e&&e.__esModule?e:{default:e}}var p=(0,n(68001).initialize)(a.default,o.default,i.default,s.default,l.default,d,u.default);e.exports={pgBrowser:p}},68001:(e,t,n)=>{n(79753),n(82526),n(41817),n(41539),n(32165),n(66992),n(78783),n(33948),n(68309),n(91038),n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.setPanelTitle=b,t.initialize=function(e,t,n,_,v,y,w){var S=w,k=r.Terminal,T=null;return S.psql||(S.psql={init:function(){this.initialized=!0,y.setPGCSRFToken(v.csrf_token_header,v.csrf_token);var t=[{name:"psql",module:this,applies:["tools"],callback:"psql_tool",priority:1,label:e("PSQL Tool (Beta)"),enable:this.psqlToolEnabled}];this.enable_psql_tool=v.enable_psql,v.enable_psql&&S.add_menus(t);var n=new S.Frame({name:"frm_psqltool",showTitle:!0,isCloseable:!0,isPrivate:!0,url:"about:blank"}),r=this,a=setInterval((function(){S.preference_version()>0&&(r.preferences=S.get_preferences_for_module("psql"),clearInterval(a))}),0);return S.onPreferencesChange("psql",(function(){r.preferences=S.get_preferences_for_module("psql")})),n.load(S.docker),this},psqlToolEnabled:function(t){var n=!(_.isUndefined(t)||_.isNull(t)||!v.enable_psql||-1!=_.indexOf(v.unsupported_nodes,t._type)||("database"!=t._type||!t.allowConn)&&"database"==t._type);return(0,u.enable)(e("PSQL Tool"),n),n},psql_tool:function(t,r){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=(0,c.retrieveAncestorOfTypeServer)(S,r,e("PSQL Error"),l.default);if((0,d.hasBinariesConfiguration)(S,o,l.default)){var i=S.treeMenu.findNodeByDomElement(r);if(void 0!==i&&i.getData())if(T=p.getTreeNodeHierarchyFromIdentifier.call(S,r),_.isUndefined(T.server))l.default.alert(e("PSQL Error"),e("Please select a server/database object."));else{var s=(0,d.getRandomInt)(1,9999999),u="",f={database:T.database?T.database.label:"postgres",username:T.server.user_name,server:T.server.label,type:"psql_tool"},v=S.get_preferences_for_module("browser").psql_tab_title_placeholder;u=(0,h.generateTitle)(v,f);var y=this.getPanelUrls(s,u,T,a),w=g(y,3),k=w[0],P=w[1],O=w[2],E='\n        <form id="psqlToolForm" action="'.concat(k,'" method="post">\n          <input id="title" name="title" hidden />\n          <input id=\'db\' value=\'').concat(O,'\' hidden />\n          <input name="close_url" value="').concat(P,'" hidden />\n        </form>\n        <script>\n          document.getElementById("title").value = "').concat(_.escape(u),'";\n          document.getElementById("psqlToolForm").submit();\n        <\/script>\n      '),C=S.get_preferences_for_module("browser").new_browser_tab_open;if(C&&C.includes("psql_tool")){var N=window.open("","_blank");N.document.write(E),N.document.title=u}else{var x=S.docker.findPanels("properties"),D=S.docker.addPanel("frm_psqltool",m.DOCK.STACKED,x[0]);(0,d.registerDetachEvent)(D),b(D,u),D.icon("fas fa-terminal psql-tab-style"),D.focus();var M=function(e){var t=n('<div class="pg-sp-container">\n                  <div class="pg-sp-content">\n                      <div class="row">\n                          <div class="col-12 pg-sp-icon"></div>\n                      </div>\n                  </div>\n              </div>').appendTo(n(e).data("embeddedFrame").$container),r=setInterval((function(){if(n(e).data("frameInitialized")){clearInterval(r);var a=n(e).data("embeddedFrame");a&&(a.onLoaded((function(){t.remove()})),a.openHTML(E))}}),100)};M(D)}}else l.default.alert(e("PSQL Error"),e("No object selected."))}},getPanelUrls:function(e,n,r){var a=t("psql.panel",{trans_id:e}),o=S.get_preferences_for_module("misc").theme;a+="?sgid=".concat(r.server_group._id)+"&sid=".concat(r.server._id)+"&did=".concat(r.database._id)+"&server_type=".concat(r.server.server_type)+"&theme=".concat(o);var i="";return r.database&&r.database._id?(i=(i=(i=_.escape(r.database._label.replace("\\","\\\\"))).replace("'","'")).replace('"','"'),a+="&db=".concat(i)):a+="&db=",[a,t("psql.close",{trans_id:e}),i]},psql_terminal:function(){return new k({cursorBlink:!0,macOptionIsMeta:!0,scrollback:5e3})},psql_Addon:function(e){var t=this.psql_fit_screen();e.loadAddon(t);var n=this.psql_web_link();e.loadAddon(n);var r=this.psql_search();return e.loadAddon(r),t.fit(),e.resize(15,50),t.fit(),t},psql_fit_screen:function(){return new a.FitAddon},psql_web_link:function(){return new o.WebLinksAddon},psql_search:function(){return new i.SearchAddon},psql_socket:function(){return(0,s.io)("/pty",{pingTimeout:12e4,pingInterval:25e3})},set_theme:function(e){var t={background:getComputedStyle(document.documentElement).getPropertyValue("--psql-background"),foreground:getComputedStyle(document.documentElement).getPropertyValue("--psql-foreground"),cursor:getComputedStyle(document.documentElement).getPropertyValue("--psql-cursor"),cursorAccent:getComputedStyle(document.documentElement).getPropertyValue("--psql-cursorAccent"),selection:getComputedStyle(document.documentElement).getPropertyValue("--psql-selection")};e.setOption("theme",t)},psql_socket_io:function(e,t,n,r,a,o,i){e.on("pty-output",(function(e){e.error&&i.write("\r\n"),i.write(e.result),e.error&&i.write("\r\n")})),e.on("connect",(function(){"True"==t&&e.emit("start_process",{sid:n,db:r,stype:a}),o.fit(),e.emit("resize",{cols:i.cols,rows:i.rows})})),e.on("conn_error",(function(t){i.write(t.error),o.fit(),e.emit("resize",{cols:i.cols,rows:i.rows})})),e.on("conn_not_allow",(function(){i.write("PSQL connection not allowed"),o.fit(),e.emit("resize",{cols:i.cols,rows:i.rows})})),e.on("disconnect-psql",(function(){e.emit("server-disconnect",{sid:n}),i.write("\r\nServer disconnected, Connection terminated, To create new connection please open another psql tool.")}))},psql_terminal_io:function(t,n,r){t.attachCustomKeyEventHandler((function(e){return e.stopPropagation(),"keydown"!=e.type||!e.metaKey&&!e.ctrlKey||"c"!=e.key&&"C"!=e.key||document.execCommand("copy"),!e.ctrlKey||"win32"!=r})),t.textarea.addEventListener("paste",(function(){navigator.permissions.query({name:"clipboard-read"}).then((function(t){"granted"===t.state||"prompt"===t.state?navigator.clipboard.readText().then((function(e){var t=e;t.length>0&&n.emit("socket_input",{input:t,key_name:"paste"})})):l.default.alert(e("Clipboard read permission required"),e("To paste data on the PSQL terminal, Clipboard read permission required."))}))})),t.onKey((function(e){n.emit("socket_input",{input:e.key,key_name:e.domEvent.code})}))},check_db_name_change:function(e,t){if(e!=t){var n=f.default.pgAdmin.Browser.treeMenu.selected(),r=f.default.pgAdmin.Browser.treeMenu.translateTreeNodeIdFromACITree(n),a=f.default.pgAdmin.Browser.treeMenu.findNode(r.slice(0,4)).domNode,o="Current database has been moved or renamed to ".concat(t,". Click on the OK button to refresh the database name, and reopen the psql again.");(0,h.refresh_db_node)(o,a)}}}),S.psql},n(32564),n(82772),n(92222),n(26699),n(32023),n(74916),n(15306),n(47042);var r=n(12320),a=n(12617),o=n(67511),i=n(747),s=n(74724),l=_(n(55455)),u=n(14953);n(35816);var d=n(44092),c=n(30726),f=_(n(1950)),p=n(82794),h=n(9807);function _(e){return e&&e.__esModule?e:{default:e}}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t){e.title('<span title="'+t+'">'+t+"</span>")}var m=window.wcDocker},92026:t=>{t.exports=e},8012:e=>{e.exports=t},1506:e=>{e.exports=n},96481:e=>{e.exports=r},6537:e=>{e.exports=a},52536:e=>{e.exports=o}},l={};function u(e){var t=l[e];if(void 0!==t)return t.exports;var n=l[e]={id:e,loaded:!1,exports:{}};return s[e].call(n.exports,n,n.exports,u),n.loaded=!0,n.exports}u.m=s,i=[],u.O=(e,t,n,r)=>{if(!t){var a=1/0;for(l=0;l<i.length;l++){for(var[t,n,r]=i[l],o=!0,s=0;s<t.length;s++)(!1&r||a>=r)&&Object.keys(u.O).every((e=>u.O[e](t[s])))?t.splice(s--,1):(o=!1,r<a&&(a=r));o&&(i.splice(l--,1),e=n())}return e}r=r||0;for(var l=i.length;l>0&&i[l-1][2]>r;l--)i[l]=i[l-1];i[l]=[t,n,r]},u.d=(e,t)=>{for(var n in t)u.o(t,n)&&!u.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},u.e=()=>Promise.resolve(),u.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),u.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),u.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),u.j=953,(()=>{var e={953:0,528:0};u.O.j=t=>0===e[t];var t=(t,n)=>{var r,a,[o,i,s]=n,l=0;for(r in i)u.o(i,r)&&(u.m[r]=i[r]);if(s)var d=s(u);for(t&&t(n);l<o.length;l++)a=o[l],u.o(e,a)&&e[a]&&e[a][0](),e[o[l]]=0;return u.O(d)},n=self.webpackChunk=self.webpackChunk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var d=u.O(void 0,[688,160,196],(()=>u(19577)));return d=(d=u.O(d)).default})()));
//# sourceMappingURL=psql_tool.js.map